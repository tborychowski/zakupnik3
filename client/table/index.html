<div class="table" ref:table>
	{{#if data && data.length }}
		<table>
		<thead><tr>
			<td class="date">Date</td>
			<td class="desc">Description</td>
			<td class="amount">Amount</td>
		</tr></thead>
		<tbody>
			{{#each data as item, idx}}
				<tr on:click="onRowClick(item)">
					<td>{{item.date.substr(0, 7)}}</td>
					<td class="desc">{{item.category}} - {{item.description}}</td>
					<td class="amount">{{format(item.amount)}}</td>
				</tr>
			{{/each}}
		</tbody>
		<tfoot><tr>
			<td colspan="2">
				<!-- <i class="ion-md-search"></i> -->
				<input class="table-filter" type="search" placeholder="Filter">
			</td>
			<td class="amount">{{format(total)}}</td>
		</tr></tfoot>
		</table>
	{{/if}}
</div>


<script>

function formatNumber (num) {
	num = Math.round(0 + num * 100) / 100;
	return num.toLocaleString('en-GB', { minimumFractionDigits: 2 })
}

export default {
	data () {
		return { data: [] };
	},
	computed: {
		total (data) { return data.reduce((p, c) => p + c.amount, 0); },
		format (data) { return formatNumber; }
	},
	oncreate () {
	},

	methods: {
		onRowClick (item) {
			this.fire('click', item);
		}
	}
};
</script>
