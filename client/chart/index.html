<div class="chart"><canvas ref:canvas width="100%" height="130"></canvas></div>

<script>
import {$} from '../core';
import Data from '../data';
import Chart from 'chart.js';
import chartCfg from './chart-cfg';

export default {
	data () {
		return {
			isLoading: true
		};
	},
	oncreate () {
		this.load();
	},
	onstate({ changed, current, previous }) {
		if (previous && changed.date) {
			this.load();
		}
	},
	computed: {
	},
	methods: {
		load () {
			this.set({ isLoading: true });
			this.chart = new Chart(this.refs.canvas, chartCfg);

			this.chart.data.datasets[0] = {
				label: 'Expenses',
				borderWidth: 1,
				borderColor: '#888',
				pointBackgroundColor: '#888',
				data: [12, 19, 3, 5, 2, 3, 12, 19, 3, 5, 2, 3]
			};
			this.chart.options.scales.xAxes[0].gridLines.color = [
				'#ddd', 'orange', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd', '#ddd'
			];
			this.chart.update();
			// Data.Expenses.get(this.get().date).then(data => {
			// 	this.originalData = data;
			// 	this.set({ data, isLoading: false });
			// });
		},

	}
};
</script>
